{"version":3,"file":"static/js/134.a4f69d00.chunk.js","mappings":"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","sources":["pages/Movies.jsx","utils/getFunctions.js","../node_modules/@babel/runtime/helpers/esm/defineProperty.js","../node_modules/@babel/runtime/helpers/esm/objectSpread2.js"],"sourcesContent":["import { lazy, Suspense } from 'react';\nimport { useEffect, useState } from 'react';\nimport { getMovie } from 'utils/getFunctions';\nconst FilmList = lazy(() => import('components/FilmList/FilmList'));\nconst SearchForm = lazy(() =>\n  import('./Movies.styled').then(module => ({\n    ...module,\n    default: module.SearchForm,\n  }))\n);\nconst SubmitButton = lazy(() =>\n  import('./Movies.styled').then(module => ({\n    ...module,\n    default: module.SubmitButton,\n  }))\n);\nconst SearchInput = lazy(() =>\n  import('./Movies.styled').then(module => ({\n    ...module,\n    default: module.SearchInput,\n  }))\n);\n\nconst Movies = () => {\n  const [films, setFilms] = useState(null);\n  const [status, setStatus] = useState('idle');\n  const [inputValue, setInputValue] = useState('');\n  const [searchValue, setSearchValue] = useState('');\n\n  const handleChange = () => {\n    const form = document.getElementById('query');\n    setInputValue(form.elements.searchValue.value);\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    setSearchValue(inputValue);\n    setInputValue('');\n  };\n\n  useEffect(() => {\n    if (!searchValue.trim()) return;\n    let abortController = new AbortController();\n\n    const updateAbortController = newAbortController =>\n      (abortController = newAbortController);\n\n    setStatus('pending');\n    getMovie(searchValue, abortController, updateAbortController)\n      .then(({ data }) => {\n        setFilms(data.results);\n        setStatus('resolved');\n      })\n      .catch(() => setStatus('rejected'));\n\n    return () => {\n      abortController.abort();\n    };\n  }, [searchValue]);\n\n  return (\n    <main>\n      <SearchForm id=\"query\" onSubmit={handleSubmit}>\n        <SearchInput\n          type=\"text\"\n          value={inputValue}\n          name=\"searchValue\"\n          placeholder=\"input film name\"\n          required\n          onChange={handleChange}\n          autoComplete=\"off\"\n        />\n        <SubmitButton type=\"submit\">Search</SubmitButton>\n      </SearchForm>\n      {status === 'pending' && <p>Loading...</p>}\n      {status === 'resolved' && (\n        <Suspense fallback={<p>Loading FilmList ...</p>}>\n          <FilmList films={films} />\n        </Suspense>\n      )}\n      {status === 'rejected' && <p>Something went wrong</p>}\n    </main>\n  );\n};\n\nexport default Movies;\n","import axios from 'axios';\nconst KEY = '63240915768e2fa639cf91287e69284e';\nconst BASE_URL = 'https://api.themoviedb.org/3/';\n\nconst getTrends = abortController =>\n  axios.get(`${BASE_URL}trending/movie/week?api_key=${KEY}`, {\n    signal: abortController.signal,\n  });\n\nconst getMovieDetails = (movieId, abortController) =>\n  axios.get(`${BASE_URL}movie/${movieId}?api_key=${KEY}`, {\n    signal: abortController.signal,\n  });\n\nconst getGenres = async () => {\n  const responce = await axios.get(\n    `${BASE_URL}genre/movie/list?api_key=${KEY}`\n  );\n  localStorage.setItem('genres', JSON.stringify(responce.data.genres));\n  return responce.data.genres;\n};\n\nconst getCast = (id, abortController) =>\n  axios.get(`${BASE_URL}movie/${id}/credits?api_key=${KEY}`, {\n    signal: abortController.signal,\n  });\n\nconst getReviews = (id, abortController) =>\n  axios.get(`${BASE_URL}movie/${id}/reviews?api_key=${KEY}`, {\n    signal: abortController.signal,\n  });\n\nconst getMovie = (searchName, abortController, updateAbortController) => {\n  if (abortController) {\n    abortController.abort();\n  }\n\n  const newAborController = new AbortController();\n  updateAbortController(newAborController);\n\n  return axios.get(\n    `${BASE_URL}search/movie?api_key=${KEY}&query=${searchName}&page=1&include_adult=false`,\n    {\n      signal: newAborController.signal,\n    }\n  );\n};\n\nexport { getTrends, getMovieDetails, getGenres, getCast, getReviews, getMovie };\n","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import defineProperty from \"./defineProperty.js\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n\n  return target;\n}"],"names":["FilmList","lazy","SearchForm","then","module","default","SubmitButton","SearchInput","useState","films","setFilms","status","setStatus","inputValue","setInputValue","searchValue","setSearchValue","useEffect","trim","abortController","AbortController","getMovie","newAbortController","data","results","catch","abort","id","onSubmit","e","preventDefault","type","value","name","placeholder","required","onChange","form","document","getElementById","elements","autoComplete","Suspense","fallback","KEY","BASE_URL","getTrends","axios","signal","getMovieDetails","movieId","getGenres","responce","localStorage","setItem","JSON","stringify","genres","getCast","getReviews","searchName","updateAbortController","newAborController","_defineProperty","obj","key","Object","defineProperty","enumerable","configurable","writable","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","push","apply","_objectSpread2","target","i","arguments","length","source","forEach","getOwnPropertyDescriptors","defineProperties"],"sourceRoot":""}